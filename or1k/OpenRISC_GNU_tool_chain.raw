<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head>
            
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="generator" content="MediaWiki 1.17.0" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/wiki1/opensearch_desc.php" title="OR1K (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://opencores.org/wiki1/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="OR1K Atom feed" href="/wiki1/index.php?title=Special:RecentChanges&amp;feed=atom" />        <link rel="stylesheet" href="/wiki1/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared&amp;only=styles&amp;skin=OpenCores&amp;*" />
<link rel="stylesheet" href="/wiki1/skins/monobook/main.css?301" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/wiki1/skins/monobook/IE50Fixes.css?301" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/wiki1/skins/monobook/IE55Fixes.css?301" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/wiki1/skins/monobook/IE60Fixes.css?301" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wiki1/skins/monobook/IE70Fixes.css?301" media="screen" /><![endif]-->
<link rel="stylesheet" href="/wiki1/skins/OpenCores.css?301" media="screen" /><meta name="ResourceLoaderDynamicStyles" content="" />        
        <!--[if lt IE 7]>
        <script type="text/javascript" src="/wiki1/skins/common/IEFixes.js?301"></script>
		<meta http-equiv="imagetoolbar" content="no" />
        <![endif]-->
        
        <script>if ( window.mediaWiki ) {
	mediaWiki.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "OpenRISC_GNU_tool_chain", "wgTitle": "OpenRISC GNU tool chain", "wgAction": "view", "wgArticleId": 15, "wgIsArticle": true, "wgUserName": null, "wgUserGroups": ["*"], "wgCurRevisionId": 1403, "wgCategories": [], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": []});
}
</script>        
        <script type="text/javascript" src="/wiki1/skins/common/wikibits.js?301"><!-- wikibits js --></script>
		
        <!-- Head Scripts -->
                
        		<script type="text/javascript" src="/wiki1/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=OpenCores"><!-- site js --></script>
                
                
		        
		        
		        
            <title>OpenRISC GNU tool chain - OR1K :: OpenCores</title>
    <link rel="stylesheet" type="text/css" href="http://cdn.opencores.org/compiled.css" />
    <link rel="icon" type="image/png" href="http://cdn.opencores.org/img/favicon.png" />
    <link rel="shortcut icon" type="image/png" href="http://cdn.opencores.org/img/favicon.png" />
    <link type="text/css" href="http://fonts.googleapis.com/css?family=Ubuntu:regular,bold" rel="stylesheet" />
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="" />
        <script defer="defer" type="text/javascript" src="http://cdn.opencores.org/jquery-1.6.2.min.js"></script>
    <script defer="defer" type="text/javascript" src="http://cdn.opencores.org/compiled.js"></script>
    <script type="text/javascript" src="http://partner.googleadservices.com/gampad/google_service.js"></script>
    <script type="text/javascript">
    GS_googleAddAdSenseService("ca-pub-0097483751598630");
    GS_googleEnableAllServices();
    </script>
    <script type="text/javascript">
    GA_googleAddSlot("ca-pub-0097483751598630", "125x125");
    GA_googleAddSlot("ca-pub-0097483751598630", "240x60");
    GA_googleAddSlot("ca-pub-0097483751598630", "300x60");
    GA_googleAddSlot("ca-pub-0097483751598630", "468x60");
    GA_googleAddSlot("ca-pub-0097483751598630", "720x60");
    GA_googleAddSlot("ca-pub-0097483751598630", "728x90");
    </script>
    <script type="text/javascript">
    GA_googleFetchAds();
    </script>
    <!--[if IE 6]>
    <link rel="stylesheet" type="text/css" href="http://cdn.opencores.org/ie6.css" />
    <![endif]-->
    <!--[if (IE 7)|(IE 8)]>
    <link rel="stylesheet" type="text/css" href="http://cdn.opencores.org/ie78.css" />
    <![endif]-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    
    <script type="text/javascript">
        
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-2763846-2']);
        _gaq.push(['_trackPageview']);
        
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
        
    </script>
    
</head>
<body>
<div class="main">
    <div class="top">
        <a href="/"><img src="http://cdn.opencores.org/design/OpenCores.png" alt="OpenCores" width="235" height="80" /></a>
    </div>
    <div class="line">
	<div></div>
	<img src="http://cdn.opencores.org/design/corner.png" alt="" width="28" height="28" />
    </div>
    <div class="mid" id="dm">
        <div class="mainmenu" id="dml">
	            
        <div class="menu menu-login">
                Username:                                <form action="../login" method="post">
                    <input class="design" name="user" type="text" />
                    <br />
                    Password:
                    <br />
                    <input class="design" name="pass" type="password" />
                    <br />
                    <input class="design" name="remember" type="checkbox" />Remember me
                    <br />
                    <input type="hidden" name="redirect" value="or1k/" />
                    <input class="design" title="Login" type="submit" value="Login" />
                </form>
                <form action="../register" method="post">
                    <input class="design" title="Register" type="submit" value="Register" />
                </form>
                        </div>
        
                
        
        <div class="menu" id="p-navigation">
            <h2>Navigation</h2>
		<ul><li id="n-mainpage-description" class=""><a href="/or1k/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-portal" class=""><a href="/or1k/OR1K:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li><li id="n-currentevents" class=""><a href="/or1k/OR1K:Current_events" title="Find background information on current events">Current events</a></li><li id="n-recentchanges" class=""><a href="/or1k/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage" class=""><a href="/or1k/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help" class=""><a href="/or1k/Help:Contents" title="The place to find out">Help</a></li></ul>        </div>
        
                
        <div class="menu">
            <h2><label for="searchInput">Search</label></h2>
                <form action="/wiki1/index.php" id="searchform">
                    <div>
                        <input type='hidden' name="title" value="Special:Search"/>
                        <input id="searchInput" name="search" type="text" title="Search OR1K [f]" accesskey="f" value="" />
                        
                        <input type="submit" name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />
                        
                                                <input type="submit" name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
                                                
                    </div>
                </form>
        </div>
        
                
        <div class="menu menu-tools">
            <h2>Toolbox</h2>
                <ul>
                    <li id="t-whatlinkshere"><a href="/or1k/Special:WhatLinksHere/OpenRISC_GNU_tool_chain" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="/or1k/Special:RecentChangesLinked/OpenRISC_GNU_tool_chain" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="/or1k/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="/wiki1/index.php?title=OpenRISC_GNU_tool_chain&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="/wiki1/index.php?title=OpenRISC_GNU_tool_chain&amp;oldid=1403" title="Permanent link to this revision of the page">Permanent link</a></li>                </ul>
        </div>
        
        
        </div>
        <div class="content" id="dmc">
	    
<div class="banner" style="padding: 6px 0px; width: 1020px; overflow: visible;">
    
    <div style="float: left; width: 720px; height: 60px;">
        <!-- 720x60 -->
        <script type='text/javascript'>
        GA_googleFillSlot("720x60");
        </script>
    </div>
        <div style="float: left; width: 300px; height: 60px;">
        <!-- 300x60 -->
        <script type='text/javascript'>
        GA_googleFillSlot("300x60");
        </script>
    </div>
    
</div>
	                        
        <a name="top" id="top"></a>
        
                
        <div id="oc-actions">
            <p id="ca-nstab-main" class="selected"><a href="/or1k/OpenRISC_GNU_tool_chain" title="View the content page [c]" accesskey="c">Page</a></p><p id="ca-talk" class="new"><a href="/wiki1/index.php?title=Talk:OpenRISC_GNU_tool_chain&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></p><p id="ca-viewsource" class=""><a href="/wiki1/index.php?title=OpenRISC_GNU_tool_chain&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></p><p id="ca-history" class=""><a href="/wiki1/index.php?title=OpenRISC_GNU_tool_chain&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></p>        </div>
        
        <h1 id="firstHeading" class="firstHeading">
            OpenRISC GNU tool chain        </h1>
        
        <div id="bodyContent">
            <h3 id="siteSub">From OR1K</h3>
            <div id="contentSub"></div>
                                    <div id="jump-to-nav">Jump to:<a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>            <!-- start content -->
            <p>OpenRISC is supported by a 32-bit GNU toolchain offering C and C++ support. The toolchain is available in several forms, depending on which C standard library they use
</p>
<ul><li> or1k-elf for bare metal use, based on the newlib library
</li><li> or1k-linux-uclibc for Linux application use, based on the uClibc library.
</li><li> or1k-linux-musl for Linux application use, based on the musl library. (recommended over uClibc)
</li></ul>
<p><b>You can find more information about the toolchains on the <a href="http://openrisc.io/software" class="external text" rel="nofollow">software overview</a></b>
</p><p>Below you find some <b>legacy</b> alternatives to the currently maintained toolchains.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Linux_.28uClibc.29_toolchain_.28or1k-linux-uclibc.29"><span class="tocnumber">1</span> <span class="toctext">Linux (uClibc) toolchain (or1k-linux-uclibc)</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Initial_preparations"><span class="tocnumber">1.1</span> <span class="toctext">Initial preparations</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#or1k-src"><span class="tocnumber">1.2</span> <span class="toctext">or1k-src</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Linux_headers"><span class="tocnumber">1.3</span> <span class="toctext">Linux headers</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#gcc_stage_1"><span class="tocnumber">1.4</span> <span class="toctext">gcc stage 1</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#uClibc"><span class="tocnumber">1.5</span> <span class="toctext">uClibc</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#gcc_stage_2"><span class="tocnumber">1.6</span> <span class="toctext">gcc stage 2</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Hints_when_cross_compiling_with_the_or1k-linux-uclibc_toolchain"><span class="tocnumber">1.7</span> <span class="toctext">Hints when cross compiling with the or1k-linux-uclibc toolchain</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Support_for_non-Linux_systems"><span class="tocnumber">2</span> <span class="toctext">Support for non-Linux systems</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Microsoft_Windows_with_Cygwin"><span class="tocnumber">2.1</span> <span class="toctext">Microsoft Windows with Cygwin</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Precompiled_or1ksim_and_assembler"><span class="tocnumber">2.1.1</span> <span class="toctext">Precompiled or1ksim and assembler</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#Apple_Mac_OS_X"><span class="tocnumber">2.2</span> <span class="toctext">Apple Mac OS X</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#Tools"><span class="tocnumber">3</span> <span class="toctext">Tools</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#binutils"><span class="tocnumber">3.1</span> <span class="toctext">binutils</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#GCC"><span class="tocnumber">3.2</span> <span class="toctext">GCC</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#GDB"><span class="tocnumber">3.3</span> <span class="toctext">GDB</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#GDB_stable_version"><span class="tocnumber">3.3.1</span> <span class="toctext">GDB stable version</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Backwards_compatibility"><span class="tocnumber">3.3.2</span> <span class="toctext">Backwards compatibility</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Building_gdbserver"><span class="tocnumber">3.3.3</span> <span class="toctext">Building gdbserver</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Using_GDB_with_Or1ksim"><span class="tocnumber">3.3.4</span> <span class="toctext">Using GDB with Or1ksim</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#Testing"><span class="tocnumber">4</span> <span class="toctext">Testing</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#Bugs"><span class="tocnumber">5</span> <span class="toctext">Bugs</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Support"><span class="tocnumber">5.1</span> <span class="toctext">Support</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#Future_plans"><span class="tocnumber">6</span> <span class="toctext">Future plans</span></a></li>
</ul>
</td></tr></table>
<h4> <span class="mw-headline" id="Linux_.28uClibc.29_toolchain_.28or1k-linux-uclibc.29"> Linux (uClibc) toolchain (or1k-linux-uclibc) </span></h4>
<p>This is a C library aimed at embedded systems. It removes a lot of the bulk that comes with a standard C library, such as the GNU C Library, but still has all the functionality needed for an operating system such as Linux, so it is ideal for embedded applications.
</p><p>At present the OpenRISC port of uClibc is hosted on a git repository provided by <a href="http://southpole.se/" class="external text" rel="nofollow">South Pole</a>, which can be browsed and downloaded from <a href="http://openrisc.southpole.se/cgit.cgi/jonas/uClibc/" class="external free" rel="nofollow">http://openrisc.southpole.se/cgit.cgi/jonas/uClibc/</a>
</p><p>For more information about uClibc see the <a href="http://www.uclibc.org/about.html" class="external text" rel="nofollow">project's homepage</a>.
</p><p><i>TODO:</i> Write optimized versions of routines in uClibc instead of using generic ones.
</p>
<h5> <span class="mw-headline" id="Initial_preparations"> Initial preparations </span></h5>
<pre>cd ~
mkdir openrisc
cd openrisc

sudo mkdir /opt/or1k-toolchain
sudo chown username:username /opt/or1k-toolchain

export PATH=$PATH:/opt/or1k-toolchain/bin
unset LD_LIBRARY_PATH
</pre>
<h5> <span class="mw-headline" id="or1k-src"> or1k-src </span></h5>
<p>NOTE: on 32-bit machines --disable-werror is needed due to an enum acting as
bit mask is considered signed
</p>
<pre>cd ~/openrisc
git clone <a href="git://github.com/openrisc/or1k-src.git" class="external free" rel="nofollow">git://github.com/openrisc/or1k-src.git</a>
mkdir build-or1k-src
cd build-or1k-src

../or1k-src/configure --target=or1k-linux-uclibc --prefix=/opt/or1k-toolchain \
--disable-shared --disable-itcl --disable-tk --disable-tcl --disable-winsup \
--disable-libgui --disable-rda --disable-sid --disable-sim --disable-gdb \
--with-sysroot --disable-newlib --disable-libgloss --disable-werror

make -j9
make install
</pre>
<h5> <span class="mw-headline" id="Linux_headers"> Linux headers </span></h5>
<pre>export SYSROOT=/opt/or1k-toolchain/or1k-linux-uclibc/sys-root

cd ~/openrisc
git clone <a href="git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git" class="external free" rel="nofollow">git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git</a>
cd linux
ARCH=openrisc make INSTALL_HDR_PATH=${SYSROOT}/usr headers_install
</pre>
<h5> <span class="mw-headline" id="gcc_stage_1"> gcc stage 1 </span></h5>
<pre>cd ~/openrisc
git clone <a href="git://github.com/openrisc/or1k-gcc" class="external free" rel="nofollow">git://github.com/openrisc/or1k-gcc</a>

mkdir build-gcc
cd build-gcc

../or1k-gcc/configure --target=or1k-linux-uclibc --prefix=/opt/or1k-toolchain --disable-libssp \
--srcdir=../or1k-gcc --enable-languages=c --without-headers --enable-threads=single \
--disable-libgomp --disable-libmudflap --disable-shared --disable-libquadmath \
--disable-libatomic --disable-werror

make -j9
make install
</pre>
<h5> <span class="mw-headline" id="uClibc"> uClibc </span></h5>
<pre>export SYSROOT=/opt/or1k-toolchain/or1k-linux-uclibc/sys-root

cd ~/openrisc
git clone <a href="git://github.com/openrisc/uClibc-or1k.git" class="external free" rel="nofollow">git://github.com/openrisc/uClibc-or1k.git</a>

cd uClibc-or1k
make ARCH=or1k defconfig
make -j9
make PREFIX=$SYSROOT install
</pre>
<h5> <span class="mw-headline" id="gcc_stage_2"> gcc stage 2 </span></h5>
<pre>cd ~/openrisc
cd build-gcc

rm -rf *

../or1k-gcc/configure --target=or1k-linux-uclibc --prefix=/opt/or1k-toolchain --disable-libssp \
--srcdir=../or1k-gcc --enable-languages=c,c++ --enable-threads=posix --disable-libgomp \
--disable-libmudflap --with-sysroot=${SYSROOT} --disable-multilib --disable-werror

make -j9
make install
</pre>
<h5> <span class="mw-headline" id="Hints_when_cross_compiling_with_the_or1k-linux-uclibc_toolchain"> Hints when cross compiling with the or1k-linux-uclibc toolchain </span></h5>
<p>Since autotools doesn't know about or1k run the following command to replace or32 with or1k
</p>
<pre>find ./ -type f -name '*' -print | xargs sed -i 's/or32/or1k/'
</pre>
<p>Building with the following commands will work in a number of situations
</p>
<pre>./configure --host=or1k-linux-uclibc --prefix=/opt/or1k-toolchain/or1k-linux-uclibc/sys-root/usr
make
make install
</pre>
<p>Some programs embed the --prefix parameter into the binaries, but those programs usually use the DESTDIR environment variable
</p>
<pre>./configure --host=or1k-linux-uclibc --prefix=/usr
make
make DESTDIR=/opt/or1k-toolchain/or1k-linux-uclibc/sys-root install
</pre>
<h3> <span class="mw-headline" id="Support_for_non-Linux_systems"> Support for non-Linux systems </span></h3>
<h4> <span class="mw-headline" id="Microsoft_Windows_with_Cygwin"> Microsoft Windows with Cygwin </span></h4>
<p>At present only the older pre-compiled OpenRISC toolchains exist for Cygwin. The OpenRISC project currently does not have a maintainer for the toolchain on the Cygwin platform. Without one it is not certain that each toolchain release will be built for Cygwin.
</p><p>If you would like to contribute to the project by maintaining a build script and guide for Cygwin platforms, please contact the OpenRISC team.
</p><p>Alternatively, the <i>orbuild</i> framework is known to work under Cygwin, see above for more information.
</p>
<h5> <span class="mw-headline" id="Precompiled_or1ksim_and_assembler"> Precompiled or1ksim and assembler </span></h5>
<p>A contributor has made availble a precompiled version of or1ksim-0.4.0 and the OR1K assembler for Cygwin. 
</p><p>It can be downloaded <a href="http://j-software.dk/or1k/or32.zip" class="external text" rel="nofollow">here</a>.
</p>
<h4> <span class="mw-headline" id="Apple_Mac_OS_X"> Apple Mac OS X </span></h4>
<p>Robert Guenzel has provided an <a href="http://chschroeder.gamiro.de/rg/or1ksim_macOS10.4.pdf" class="external text" rel="nofollow">application note</a> on building the toolchain (excluding GDB) for Mac OS 10.4. Users will find this provides valuable additional information beyond the instructions above.
</p><p>It seems Guenzel was able to install the toolchain without hick-ups. This is not the case anymore, please follow the instructions below to install the newlib toolchain.  
</p><p><br />
See the following links for the appropriate development versions of the tools and libraries: <a href="/or1k/OpenRISC_GNU_tool_chain#Development_version" title="OpenRISC GNU tool chain">binutils</a>, <a href="/or1k/OpenRISC_GNU_tool_chain#Development_version_2" title="OpenRISC GNU tool chain">gcc</a>, <a href="/or1k/OpenRISC_GNU_tool_chain#Development_version_3" title="OpenRISC GNU tool chain">newlib</a>
</p><p><br />
The following assumes a checkout of the development repositories, which at present can be done with the following:
</p>
<pre>git clone <a href="git://github.com/openrisc/or1k-src.git" class="external free" rel="nofollow">git://github.com/openrisc/or1k-src.git</a>
git clone <a href="git://github.com/openrisc/or1k-gcc.git" class="external free" rel="nofollow">git://github.com/openrisc/or1k-gcc.git</a>
</pre>
<p>The following compile instructions will install into <code>/opt/or1k-toolchain</code> so make sure it exists and is writable by the user or whoever is running the <code>make install</code> commands.
</p><p>Make a build directory each for the gnu-src tools and gcc, alongside the checkouts, we'll call them <code>bld-or1k-src</code> and <code>bld-or1k-gcc</code> respectively.
</p>
<pre>mkdir bld-or1k-src
mkdir bld-or1k-gcc
</pre>
<p>Requirements: 
</p>
<pre> Apple Developer: Command Line Tools
 Brew installations: gmp libmpc mpfr cloog isl
 Variables ~/.bash_profile: export CC=cc / export CXX=c++
 Add toolchain to PATH: /opt/or1k-toolchain/bin
</pre>
<p>Build the first set of tools, binutils etc.
</p>
<pre>cd bld-or1k-src

../or1k-src/configure --target=or1k-elf --prefix=/opt/or1k-toolchain --enable-shared \
--disable-itcl --disable-tk --disable-tcl --disable-winsup --disable-libgui --disable-rda \
--disable-sid --disable-sim --disable-gdb --with-sysroot --disable-newlib \
--disable-libgloss  --disable-werror
make
make install
</pre>
<p>Build gcc
</p>
<pre>Download and unpack libgmp
Rename to gmp and move to or1k-gcc/.
Download and unpack libmpfr
Rename to mpfr and move to or1k-gcc/.
Download and unpack libmpc
Rename to mpc and move to or1k-gcc/.

cd ../bld-or1k-gcc

../or1k-gcc/configure --target=or1k-elf --prefix=/opt/or1k-toolchain --enable-languages=c \
--disable-shared --disable-libssp --disable-werror
make
make install
</pre>
<p>Build newlib and gdb (without or1ksim in this case)
</p>
<pre>cd ..
rm -rf bld-or1k-src
mkdir bld-or1k-src  
cd bld-or1k-src

../or1k-src/configure --target=or1k-elf --prefix=/opt/or1k-toolchain --enable-shared \
--disable-itcl --disable-tk --disable-tcl --disable-winsup --disable-libgui --disable-rda \
--disable-sid --disable-sim --disable-or1ksim --enable-gdb  --with-sysroot --enable-newlib \
--enable-libgloss --disable-gdbtk --disable-werror
make
make install
</pre>
<p>Build gcc again, this time with newlib
</p>
<pre>cd ..
rm -rf bld-or1k-gcc
mkdir bld-or1k-gcc
cd bld-or1k-gcc

../or1k-gcc/configure --target=or1k-elf --prefix=/opt/or1k-toolchain --enable-languages=c,c++ \
--disable-shared --disable-libssp --with-newlib
make
make install
</pre>
<p>See the page on the <a href="/or1k/Newlib" title="Newlib">newlib library port</a> for details on what you've just built and installed.
</p><p>Obs.: 
</p>
<ol><li> We compile or1k-src without "sim". Generally it is enabled. But if you turn it on, you get compilation problems with or1k-sim. 
</li><li> We disable gdbtk (probably gdbtui). We do this to avoid tcl/tk problems that arise on OSX. Some of it can be circumvented by changing the following lines in acinclude.m4 under gdb and libgui. 
</li></ol>
<pre>dir=`echo ${TCL_INCLUDE_SPEC}/tcl-private/generic | sed -e s/-I//` 
dir=`echo ${TK_INCLUDE_SPEC}/tk-private/generic | sed -e s/-I//`
</pre>
<p>to
</p>
<pre>dir=`echo ${TCL_INCLUDE_SPEC}/Headers/tcl-private | sed -e s/-I//` 
dir=`echo ${TK_INCLUDE_SPEC}/Headers/tk-private | sed -e s/-I//`
</pre>
<ul><li> Then run autoconf under gdb and libgui. But you end up still having some other problems because the variable MAC_TCL turns out not be defined by the configure script.
</li></ul>
<h2> <span class="mw-headline" id="Tools"> Tools </span></h2>
<h3> <span class="mw-headline" id="binutils"> binutils </span></h3>
<p>This is a collection of tools for the manipulation of object code in various object file formats. Among its many tools, it provides the assembler and linker.
</p><p>More information about the GNU project's release of binutils can be found at its <a href="http://www.gnu.org/software/binutils/" class="external text" rel="nofollow">GNU homepage</a>.
</p><p>It can be found here: <a href="https://github.com/openrisc/or1k-src" class="external free" rel="nofollow">https://github.com/openrisc/or1k-src</a>
</p>
<h3> <span class="mw-headline" id="GCC"> GCC </span></h3>
<p>A version of GCC targeted at the OpenRISC platform is provided here. Known as a cross compiler, it is a version which will create code that is executable on an OpenRISC processor.
</p><p>More information about the official GCC releases can be found at the project's homepage.
</p><p>It is currently based on gcc-4.8.0.
</p><p>It is hosted here: <a href="https://github.com/openrisc/or1k-gcc" class="external free" rel="nofollow">https://github.com/openrisc/or1k-gcc</a>
</p>
<h3> <span class="mw-headline" id="GDB"> GDB </span></h3>
<p>The GNU Project Debugger (GDB) is a standard debugging tool. It is used for debugging code while it is executing on any OpenRISC target, be it simulated (architectural simulator or RTL) or physical (FPGA, or ASIC.) It also provides a convenient mechanism for transferring and running code in any OpenRISC based system.
</p>
<h4> <span class="mw-headline" id="GDB_stable_version"> GDB stable version </span></h4>
<p>GDB 7.2 has now been ported to the OpenRISC 1000 architecture and is regarded as the stable implementation.
</p><p>Key new features are:
</p>
<ul><li> support for DWARF2 debug format by default.
</li><li> support for GCC 4.5.1.
</li><li> support for gdbserver under <a href="/or1k/Linux" title="Linux">OpenRISC Linux</a>.
</li><li> support for core file debugging
</li></ul>
<p>Known issues are:
</p>
<ul><li> there are still many regression failures, which remain to be investigated.
</li><li> gdbserver relies on a range of Linux system calls, not all of which are fully implemented.
</li><li> OpenRISC Linux does not currently generate valid core files.
</li><li> Message "Value being assigned to is no longer active" is given when trying to alter a register immediately after loading a new program image. This is a known bug in GDB. It is one feature of a complex problem with the way GDB represents stack frames.
</li></ul>
<dl><dd>One workaround is to set a breakpoint on the first instruction of the loaded image, run to that breakpoint (which will do nothing), and then GDB will allow registers to be set. However user nyawn has found a small [cvs.fedoraproject.org/viewvc/devel/gdb/gdb-6.8-bz436037-reg-no-longer-active.patch?view=log patch] from the Fedora project which fixes this particular problem. 
</dd></dl>
<p>Details of the internal workings of the GDB port for OpenRISC 1000 can be found in the application note <a href="http://www.embecosm.com/download/ean3.html" class="external text" rel="nofollow">Howto: Porting the GNU Debugger: Practical Experience with the OpenRISC 1000 Architecture</a> published by Embecosm. Although based on GDB 6.8, much of the content is relevant to GDB 7.2.
</p><p>Details of the implementation of the RSP server functionality for Or1ksim can be found in the application note Howto: GDB Remote Serial Protocol: Writing a RSP Server published by Embecosm.
</p><p>This version of GDB works with the graphical user interface DDD. It has also been tested with the Insight graphical debugger and appears to work.
</p>
<h4> <span class="mw-headline" id="Backwards_compatibility"> Backwards compatibility </span></h4>
<p>The following compatibility issues have been noted.
</p>
<ul><li> The current stable version is only compatible with OpenRISC GCC 4.5.1 and later, due to the change in global symbol handling and changes to function prologues.
</li><li> Support for the legacy OpenRISC Remote JTAG Protocol has now been dropped.
</li><li> Only version 0.3.0 or later of the architectural simulator, <a href="/or1k/Or1ksim" title="Or1ksim">Or1ksim</a> is supported.
</li></ul>
<h4> <span class="mw-headline" id="Building_gdbserver"> Building gdbserver </span></h4>
<p>gdbserver can be run on an OpenRISC linux system to act as a RSP client and allow remote debugging of <i>applications</i> on the Linux system.
</p><p>gdbserver must be built by hand. The following instructions assume you have used the <tt>bld-all.sh</tt> script to build the or32-linux toolchain.
</p><p><b>Note.</b> You must build your tool chain with uClibc compiled with UCLIBC_HAS_THREADS=y and PTHREADS_DEBUG_SUPPORT=y.
</p><p>Change to the bd-linux-gdb/gdb directory
</p>
<pre>cd bd-linux-gdb/gdb
</pre>
<p>Create a new directory, gdbserver, and change to it.
</p>
<pre>mkdir gdbserver
cd gdbserver
</pre>
<p>Configure gdbserver to run on or32-linux as host
</p>
<pre>../../../gdb-7.2/gdb/gdbserver/configure --host=or32-linux
</pre>
<p>Build the system
</p>
<pre>make
</pre>
<p>Copy the <tt>gdbserver</tt> executable to the target Linux system for use. There are two ways to do this:
</p>
<ol><li> FTP the file to the target OpenRISC Linux system. <b>Note.</b> You will need to make the file executable after it has been copied using <i>chmod</i>.
</li><li> Copy <tt>gdbserver</tt> into a suitable directory in the Linux initramfs (for example arch/openrisc/support/initramfs/bin) and rebuild Linux. The executable will then always be there.
</li></ol>
<p>You can run gdbserver on the target Linux system as follows (using port 51000 as an example):
</p>
<pre>gdbserver&#160;:51000 <i>my_program</i>
</pre>
<p>This will allow <i>my_program</i> to be debugged remotely via port 51000. On the host workstation, you can then connect to this target (in this example at IP address 192.168.0.37) as follows:
</p>
<pre>$ or32-linux-gdb <i>my_program</i>
...
(gdb) target remote 192.168.0.37:51000
(gdb) break main
(gdb) run
</pre>
<p>Which will run the program until it hits the breakpoint at the start of <tt>main ()</tt>. <b>Note.</b> You must have a copy of the program both on the target Linux machine (to execute) and on the workstation running gdb (for the symbol table).
</p>
<h4> <span class="mw-headline" id="Using_GDB_with_Or1ksim"> Using GDB with Or1ksim </span></h4>
<p>Users often wish to use GDB with <a href="/or1k/Or1ksim" title="Or1ksim">Or1ksim</a>, the architectural simulator. Here  are some simple guidelines to get started.
</p><p>Take a simple program which you have compiled something like this:
</p>
<pre>or32-elf-gcc -g HelloWorld.c -o HelloWorld
</pre>
<p><b>Note.</b> Remember to use -g so debug information is included. It doesn't affect program performance, but makes for a much richer debug experience.
</p><p>Simplest way to debug is to use the built in Or1ksim within GDB. By default that gives you a simple config with 8M of memory.
</p>
<pre>or32-elf-gdb HelloWorld
...
(gdb) target sim
(gdb) load
&lt;set up any breakpoints etc&gt;
(gdb) run
...
</pre>
<p>If you want to use Or1ksim standalone (perhaps with a more complex configuration), then start it up, specifying a port for debug connection. You can either do this within the config file (it is the <i>rsp_port</i> parameter), or specify it on the command line:
</p>
<pre>or32-elf-sim --srv=51000 ...
</pre>
<p>This sets up GDB to use port 51000 to communicate on. You can specify any value up to 65535, although you should definitely avoid values below 1024. If you don't specify a value, Or1ksim will select a port at random and tell you.
</p><p>In a separate window on the same machine start up GDB
</p>
<pre>or32-elf-gdb HelloWorld
...
(gdb) target remote&#160;:51000
(gdb) load
&lt;set up any breakpoints etc&gt;
(gdb) continue
...
</pre>
<p>Note that the usage is slightly different, you are connecting to a model that is already "started", so you just continue execution. Don't worry, connecting stalls the model, while loading the image sets the PC to its entry point, so you will continue at the right place.
</p>
<h2> <span class="mw-headline" id="Testing"> Testing </span></h2>
<p>Each tool is tested using the GNU tool regression test suites. The newlib toolchain is tested using the GDB simulator (which is <a href="/or1k/Or1ksim" title="Or1ksim">Or1ksim</a>) standalone. The uClibc toolchain is tested using OpenRISC linux running on Or1ksim, using FTP and telnet through a TUN/TAP Ethernet interface.
</p><p>The results are large, so there is a separate page for the <a href="/or1k/Newlib_tool_chain_test_results" title="Newlib tool chain test results">newlib toolchain test results</a> and the <a href="/or1k/UClibc_tool_chain_test_results" title="UClibc tool chain test results">uClibc toolchain test results</a>.
</p>
<h2> <span class="mw-headline" id="Bugs"> Bugs </span></h2>
<p>The project uses <a href="http://bugzilla.opencores.org/" class="external text" rel="nofollow">Bugzilla</a> to track all the bugs in its hardware and software. That's a good place to look for existing bugs, or to report a new bug.
</p>
<h3> <span class="mw-headline" id="Support"> Support </span></h3>
<p>This is an open source project, so the community provides support (although there are companies offering commercial support as well). The various <a href="/or1k/OR1K:Community_Portal#Mailing_lists" title="OR1K:Community Portal" class="mw-redirect">mailing lists</a> and <a href="/or1k/OR1K:Community_Portal#IRC" title="OR1K:Community Portal" class="mw-redirect">IRC</a> are good places to seek assistance.
</p><p>Also check the <a href="/or1k/OpenRISC_GNU_tool_chain_troubleshooting" title="OpenRISC GNU tool chain troubleshooting">troubleshooting page</a> for details on any fixes, or to document any issues with fixes.
</p>
<h2> <span class="mw-headline" id="Future_plans"> Future plans </span></h2>
<p>See <a href="/or1k/OR1K:FutureWork" title="OR1K:FutureWork">Future Work</a>
</p>
<!-- 
NewPP limit report
Preprocessor node count: 95/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key opencores_or1k:pcache:idhash:15-0!*!0!!en!*!edit=0 and timestamp 20161008221740 -->
<div class="printfooter">
Retrieved from "<a href="http://opencores.org/or1k/OpenRISC_GNU_tool_chain">http://opencores.org/or1k/OpenRISC_GNU_tool_chain</a>"</div>
            <div id='catlinks' class='catlinks catlinks-allhidden'></div>            <!-- end content -->
                        <div class="visualClear"></div>
        </div>
        
                
        <div class="visualClear"><p></p></div>
        
        <div id="footer">
            <a href="http://www.mediawiki.org/"><img src="/wiki1/skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a><div id="f-poweredbyico"></div><ul id="f-list"> This page was last modified on 20 March 2016, at 16:07.<li id="lastmod"></li>This page has been accessed 79,770 times.<li id="viewcount"></li><a href="/or1k/OR1K:Privacy_policy" title="OR1K:Privacy policy">Privacy policy</a><li id="privacy"></li><a href="/or1k/OR1K:About" title="OR1K:About">About OR1K</a><li id="about"></li><a href="/or1k/OR1K:General_disclaimer" title="OR1K:General disclaimer">Disclaimers</a><li id="disclaimer"></li></ul>
<script src="/wiki1/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=OpenCores&amp;*"></script>
<script>if ( window.mediaWiki ) {
	mediaWiki.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "OpenRISC_GNU_tool_chain", "wgTitle": "OpenRISC GNU tool chain", "wgAction": "view", "wgArticleId": 15, "wgIsArticle": true, "wgUserName": null, "wgUserGroups": ["*"], "wgCurRevisionId": 1403, "wgCategories": [], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": []});
}
</script>
<script>if ( window.mediaWiki ) {
	mediaWiki.loader.load(["mediawiki.util", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax"]);
	mediaWiki.loader.go();
}
</script>

<script>if ( window.mediaWiki ) {
	mediaWiki.user.options.set({"ccmeonemails":0,"cols":80,"contextchars":50,"contextlines":5,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"opencores","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,
	"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;mediaWiki.loader.state({"user.options":"ready"});
}
</script><!-- Served in 2.053 secs. -->            
        </div>
        
        
        </div>
	<div style="clear:both;margin-left:200px;">
            <!-- 728x90 -->
            <script type="text/javascript">
            GA_googleFillSlot("728x90");
            </script>
	</div>
    </div>
    <div class="bot">
	&copy; copyright 1999-2016
OpenCores.org, equivalent to ORSoC AB, all rights reserved. OpenCores&reg;, registered trademark.
    </div>
</div>

<!-- Google search -->
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">google.load("elements", "1", {packages: "transliteration"});</script>
<script type="text/javascript" src="http://www.google.com/coop/cse/t13n?form=cse-search-box&amp;t13n_langs=en"></script>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<!-- /Google search -->

</body>
</html>